{"version":3,"sources":["services/persons.js","Person.js","Persons.js","Filter.js","PersonForm.js","Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","person","post","personId","delete","put","id","Person","onDelete","name","number","onClick","Persons","persons","filter","toLowerCase","includes","map","key","Filter","onFilterChange","onChange","event","PersonForm","props","onSubmit","onNameChange","value","newName","onNumberChange","newNumber","type","Notification","children","success","hide","useEffect","setTimeout","className","style","backgroundColor","App","useState","setPersons","setNewName","setNewNumber","setFilter","notification","setNotification","personsService","message","target","preventDefault","find","window","confirm","previous","prevPerson","alert","catch","error","status","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.641e8c92.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst baseUrl = '/api/persons';\r\n\r\nconst getPersons = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst addPerson = (person) => {\r\n  const request = axios.post(baseUrl, person);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (personId) => {\r\n  const request = axios.delete(`${baseUrl}/${personId}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst changeNumber = (person) => {\r\n  const request = axios.put(`${baseUrl}/${person.id}`, person);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default {\r\n  getPersons,\r\n  addPerson,\r\n  deletePerson,\r\n  changeNumber,\r\n};\r\n","import React from 'react';\r\n\r\nconst Person = ({ person, onDelete }) => (\r\n  <li>\r\n    {person.name} - {person.number}{' '}\r\n    <button onClick={() => onDelete(person)}>Delete</button>\r\n  </li>\r\n);\r\n\r\nexport default Person;\r\n","import React from 'react';\r\n\r\nimport Person from './Person';\r\n\r\nconst Persons = ({ persons, filter, onDelete }) => (\r\n  <ul>\r\n    {persons\r\n      .filter((person) => person.name.toLowerCase().includes(filter))\r\n      .map((person) => (\r\n        <Person key={person.name} person={person} onDelete={onDelete} />\r\n      ))}\r\n  </ul>\r\n);\r\n\r\nexport default Persons;\r\n","import React, { Fragment } from 'react';\r\n\r\nconst Filter = ({ onFilterChange }) => (\r\n  <Fragment>\r\n    filter <input onChange={(event) => onFilterChange(event)} />\r\n  </Fragment>\r\n);\r\n\r\nexport default Filter;\r\n","import React from 'react';\r\n\r\nconst PersonForm = (props) => (\r\n  <form onSubmit={(event) => props.onSubmit(event)}>\r\n    <div>\r\n      name:{' '}\r\n      <input\r\n        onChange={(event) => props.onNameChange(event)}\r\n        value={props.newName}\r\n      />\r\n    </div>\r\n    <div>\r\n      number\r\n      <input\r\n        onChange={(event) => props.onNumberChange(event)}\r\n        value={props.newNumber}\r\n      />\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n);\r\n\r\nexport default PersonForm;\r\n","import React, { Fragment, useEffect } from 'react';\r\nimport './notification.css';\r\n\r\nconst Notification = ({ children, success, hide }) => {\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      hide();\r\n    }, 5000);\r\n  }, []);\r\n\r\n  return (\r\n    <Fragment>\r\n      {!children ? null : (\r\n        <div\r\n          className=\"notification\"\r\n          style={{ backgroundColor: success ? 'green' : 'red' }}\r\n        >\r\n          {children}\r\n        </div>\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from 'react';\n\nimport personsService from './services/persons';\n\nimport Persons from './Persons';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Notification from './Notification';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n  const [notification, setNotification] = useState(null);\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value.toLowerCase());\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const person = persons.find(\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\n    );\n    if (person) {\n      if (newNumber !== person.number) {\n        const replace = window.confirm(\n          `${person.name} is already added to the phonebook, do you want to replace the old phone number with the new one?`\n        );\n\n        if (replace) {\n          return personsService\n            .changeNumber({ ...person, number: newNumber })\n            .then(() => {\n              setPersons((previous) =>\n                previous.map((prevPerson) => {\n                  if (prevPerson.id === person.id) {\n                    prevPerson.number = newNumber;\n                  }\n                  return prevPerson;\n                })\n              );\n              setNotification({\n                message: `Updated phone number`,\n                success: true,\n              });\n            });\n        }\n      }\n      return alert('Person is already in phonebook');\n    }\n    personsService.addPerson({ name: newName, number: newNumber }).then(() => {\n      setPersons((previous) => [\n        ...previous,\n        { name: newName, number: newNumber },\n      ]);\n      setNotification({ message: `Added ${newName}`, success: true });\n      setNewNumber('');\n      setNewName('');\n    });\n  };\n\n  const handleDelete = (person) => {\n    const result = window.confirm(`Delete ${person.name}?`);\n    if (result) {\n      personsService\n        .deletePerson(person.id)\n        .then(() => {\n          setPersons((previous) =>\n            previous.filter((prevPerson) => prevPerson.id !== person.id)\n          );\n          setNotification({ message: 'Deleted Successfully', success: true });\n        })\n        .catch((error) =>\n          error.response.status === 404\n            ? setNotification({\n                message: `${person.name} has already been removed`,\n                success: false,\n              })\n            : setNotification({\n                message: `An unexpected error ocurred`,\n                success: false,\n              })\n        );\n    }\n  };\n\n  useEffect(() => {\n    personsService.getPersons().then((persons) => {\n      setPersons(persons);\n    });\n  }, []);\n\n  return (\n    <div>\n      {notification && (\n        <Notification\n          success={notification.success}\n          hide={() => setNotification(null)}\n        >\n          {notification.message}\n        </Notification>\n      )}\n      <h2>Phonebook</h2>\n      <Filter onFilterChange={handleFilterChange} />\n      <h2>Add new</h2>\n      <PersonForm\n        onSubmit={handleSubmit}\n        onNameChange={handleNameChange}\n        onNumberChange={handleNumberChange}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} onDelete={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}